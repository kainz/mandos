# -*- shell-script -*-

# if mkinitramfs is started by mkinitramfs-kpkg, mkinitramfs-kpkg has
# already touched the initrd file with umask 022 before we had a
# chance to affect it.  We cannot allow a readable initrd file,
# therefore we must fix this now.
if [ -e "${outfile}" ] \
    && [ `stat --format=%s "${outfile}"` -eq 0 ]; then
    rm "${outfile}"
    (umask 027; touch "${outfile}")
fi
